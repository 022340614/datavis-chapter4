name: Force Redeploy GitHub Pages

on:
  push:
    branches: [ main ]
  workflow_dispatch:
  schedule:
    - cron: '0 * * * *'  # æ¯å°æ—¶è¿è¡Œä¸€æ¬¡

permissions:
  contents: read
  pages: write
  id-token: write

jobs:
  force-redeploy:
    runs-on: ubuntu-latest
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
          
      - name: Setup Pages
        uses: actions/configure-pages@v4
        
      - name: Force rebuild verification
        run: |
          echo "ğŸ”§ å¼ºåˆ¶é‡æ–°éƒ¨ç½² GitHub Pages"
          echo "ä»“åº“: datavis-chapter4"
          echo "ç”¨æˆ·: 022340614"
          echo "é¢„æœŸç½‘å€: https://022340614.github.io/datavis-chapter4/"
          echo "å½“å‰æ–‡ä»¶ç»“æ„:"
          ls -la
          echo "æ£€æŸ¥å¿…éœ€æ–‡ä»¶:"
          [ -f "index.html" ] && echo "âœ… index.html å­˜åœ¨" || echo "âŒ index.html ç¼ºå¤±"
          [ -f "styles.css" ] && echo "âœ… styles.css å­˜åœ¨" || echo "âŒ styles.css ç¼ºå¤±"
          [ -f "script.js" ] && echo "âœ… script.js å­˜åœ¨" || echo "âŒ script.js ç¼ºå¤±"
          [ -f ".nojekyll" ] && echo "âœ… .nojekyll å­˜åœ¨" || echo "âŒ .nojekyll ç¼ºå¤±"
          
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: .
          
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4